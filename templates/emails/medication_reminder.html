{% extends "emails/base.html" %}

{% block title %}Medication Reminder - VitaNips{% endblock %}

{% block content %}
<!-- Greeting -->
<p class="greeting" style="font-size: 20px; color: #1f2937; margin-bottom: 24px; font-weight: 400; line-height: 1.6;">
    Hi {{ user.first_name|default:"there" }},
</p>

<p style="font-size: 16px; color: #4b5563; margin-bottom: 32px; line-height: 1.7;">
    It's time to take your medication.
</p>

<!-- Medication Details Box -->
<div class="info-box" style="background-color: #ffffff; border: 1px solid #e5e7eb; padding: 32px; margin: 32px 0; border-radius: 24px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);">
    <h2 class="subheading" style="font-family: 'Ojuju', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 24px; font-weight: 500; color: #1f2937; line-height: 1.3; margin: 0 0 24px 0; letter-spacing: -0.02em;">
        Medication Information
    </h2>
    
    <div class="info-item" style="margin: 20px 0; padding-bottom: 20px; border-bottom: 1px solid #f3f4f6;">
        <span class="info-label" style="font-weight: 600; color: #374151; display: block; margin-bottom: 6px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.05em;">Medication</span>
        <span class="info-value" style="color: #32a852; font-size: 16px; font-weight: 600;">
            {{ medication.name|default:reminder.medication.name }}
        </span>
    </div>
    
    {% if medication.generic_name %}
    <div class="info-item" style="margin: 20px 0; padding-bottom: 20px; border-bottom: 1px solid #f3f4f6;">
        <span class="info-label" style="font-weight: 600; color: #374151; display: block; margin-bottom: 6px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.05em;">Generic Name</span>
        <span class="info-value" style="color: #1f2937; font-size: 16px;">{{ medication.generic_name }}</span>
    </div>
    {% endif %}
    
    <div class="info-item" style="margin: 20px 0; padding-bottom: 20px; border-bottom: 1px solid #f3f4f6;">
        <span class="info-label" style="font-weight: 600; color: #374151; display: block; margin-bottom: 6px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.05em;">Dosage</span>
        <span class="info-value" style="color: #1f2937; font-size: 16px;">{{ reminder.dosage }}</span>
    </div>
    
    <div class="info-item" style="margin: 20px 0; padding-bottom: 20px; border-bottom: 1px solid #f3f4f6;">
        <span class="info-label" style="font-weight: 600; color: #374151; display: block; margin-bottom: 6px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.05em;">Scheduled Time</span>
        <span class="info-value" style="color: #1f2937; font-size: 16px;">{{ reminder.time_of_day|time:"g:i A" }}</span>
    </div>
    
    <div class="info-item" style="margin: 20px 0; padding-bottom: 20px; border-bottom: 1px solid #f3f4f6;">
        <span class="info-label" style="font-weight: 600; color: #374151; display: block; margin-bottom: 6px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.05em;">Frequency</span>
        <span class="info-value" style="color: #1f2937; font-size: 16px;">{{ reminder.get_frequency_display }}</span>
    </div>
    
    {% if reminder.notes %}
    <div class="info-item" style="margin: 20px 0 0 0;">
        <span class="info-label" style="font-weight: 600; color: #374151; display: block; margin-bottom: 6px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.05em;">Notes</span>
        <span class="info-value" style="color: #1f2937; font-size: 16px;">{{ reminder.notes }}</span>
    </div>
    {% endif %}
</div>

<!-- Important Instructions -->
{% if medication.description or medication.side_effects %}
<div style="background-color: #fffbeb; border: 1px solid #fde68a; padding: 24px; margin: 32px 0; border-radius: 16px;">
    <p style="margin: 0 0 16px 0; color: #92400e; font-weight: 600; font-size: 16px;">
        Important information
    </p>
    
    {% if medication.description %}
    <p style="margin: 0 0 12px 0; color: #78350f; font-size: 15px; line-height: 1.6;">
        <strong>About this medication:</strong> {{ medication.description|truncatewords:50 }}
    </p>
    {% endif %}
    
    {% if medication.side_effects %}
    <p style="margin: 0; color: #78350f; font-size: 15px; line-height: 1.6;">
        <strong>Possible side effects:</strong> {{ medication.side_effects|truncatewords:30 }}
    </p>
    {% endif %}
</div>
{% endif %}

<!-- Storage Instructions -->
{% if medication.storage_instructions %}
<div class="success-box" style="background-color: #f0fdf4; border: 1px solid #bbf7d0; padding: 24px; margin: 32px 0; border-radius: 16px;">
    <p style="margin: 0 0 8px 0; color: #166534; font-weight: 600; font-size: 16px;">
        Storage Instructions
    </p>
    <p style="margin: 0; color: #15803d; font-size: 15px; line-height: 1.6;">
        {{ medication.storage_instructions }}
    </p>
</div>
{% endif %}

<!-- Action Button -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin: 40px 0;">
    <tr>
        <td align="center">
            <a href="https://vitanips.com/medications/reminders" class="button" style="background-color: #32a852; color: #ffffff; padding: 16px 32px; text-decoration: none; border-radius: 9999px; font-weight: 700; font-size: 16px; display: inline-block; box-shadow: 0 4px 12px rgba(50, 168, 82, 0.2);">
                Mark as Taken
            </a>
        </td>
    </tr>
</table>

<hr class="divider" style="border: 0; border-top: 1px solid #e5e7eb; margin: 40px 0;">

<!-- Health Tips -->
<div style="background-color: #f9fafb; border: 1px solid #e5e7eb; padding: 24px; margin: 32px 0; border-radius: 16px;">
    <p style="margin: 0 0 16px 0; color: #1f2937; font-weight: 600; font-size: 16px;">
        Medication tips
    </p>
    <ul style="margin: 0; padding-left: 20px; color: #4b5563; font-size: 15px; line-height: 1.8;">
        <li style="margin-bottom: 8px;">Take your medication at the same time each day</li>
        <li style="margin-bottom: 8px;">Don't skip doses even if you feel better</li>
        <li style="margin-bottom: 8px;">Contact your doctor if you experience unusual side effects</li>
        <li style="margin-bottom: 8px;">Never share your medication with others</li>
        <li>Check the expiration date before taking</li>
    </ul>
</div>

<hr class="divider" style="border: 0; border-top: 1px solid #e5e7eb; margin: 40px 0;">

<!-- Need Help? -->
<p style="font-size: 15px; color: #6b7280; margin: 0 0 8px 0; line-height: 1.6;">
    <strong style="color: #1f2937;">Need to refill or have questions?</strong>
</p>
<p style="font-size: 15px; color: #6b7280; margin: 0; line-height: 1.6;">
    Log in to your VitaNips account to request refills, view your prescription history, or contact your doctor directly.
</p>

<!-- Closing -->
<p style="margin-top: 32px; font-size: 16px; color: #1f2937; font-weight: 400; line-height: 1.6;">
    Best regards,<br>
    <span style="color: #32a852; font-weight: 600;">The VitaNips Team</span>
</p>
{% endblock %}

{% block footer_text %}
You're receiving this email because you have an active medication reminder in VitaNips.<br>
To manage your reminders and notification preferences, <a href="https://vitanips.com/settings/notifications" style="color: #32a852; font-weight: 500;">visit your account settings</a>.
{% endblock %}
